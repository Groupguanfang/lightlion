import{c,r as g,s as b}from"./User.7a199d69.js";import{_ as f,x as _,f as C,r,o as v,c as w,a as n,w as d,d as u,l as m,t as V,p as y,b as x}from"./index.cca8fa7f.js";import{_ as k}from"./logo.78864314.js";import"./axios.eec18f4d.js";const B={components:{ChevronRightIcon:_},data(){return{username:"",password:"",retryPassword:"",email:"",buttonLoading:!1,buttonDisabled:!0,nameError:"",code:"",sendCodeButton:!1,sendCodeButtonText:"\u53D1\u9001\u9A8C\u8BC1\u7801"}},methods:{async checker(){if(this.buttonLoading=!0,this.password===this.retryPassword)if(C(this.code))this.buttonDisabled=!0;else{const t=await c(this.username);t.data.code===200?(this.buttonDisabled=!1,this.nameError=""):(this.buttonDisabled=!0,this.nameError=t.data.message)}else this.buttonDisabled=!0;this.buttonLoading=!1},async action(){this.buttonLoading=!0;try{const t=await g(this.username,this.password,this.email,this.code);t.data.code!==500?(localStroage.setItem("cookie",t),this.buttonLoading=!1,this.toast("\u6CE8\u518C\u6210\u529F")):(this.buttonLoading=!1,this.$toast(t.data.message))}catch(t){this.$toast(t)}},async sendCode(){this.sendCodeButton=!0,this.sendCodeButtonText="\u6B63\u5728\u53D1\u9001";try{const t=await b(this.email);this.sendCodeButtonText="\u53D1\u9001\u9A8C\u8BC1\u7801",this.$toast("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F\uFF0C\u82E5\u6CA1\u6536\u5230\u8BF7\u518D\u53D1\u4E00\u6B21"),this.sendCodeButton=!1}catch{this.$toast("\u51FA\u73B0\u9519\u8BEF")}}}},I=t=>(y("data-v-77ff5597"),t=t(),x(),t),D={class:"register"},E=m(" \u6CE8\u518C "),L={class:"padding"},R=I(()=>u("img",{class:"logo",src:k,alt:"logo"},null,-1));function S(t,e,T,U,o,a){const p=r("t-navbar"),l=r("t-input"),i=r("t-button"),h=r("ChevronRightIcon");return v(),w("div",D,[n(p,{rightShow:!1},{default:d(()=>[E]),_:1}),u("main",L,[R,n(l,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),label:"\u7528\u6237\u540D",errorMessage:o.nameError,placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D,\u652F\u6301\u4E2D\u82F1\u6587",onChange:e[1]||(e[1]=s=>a.checker())},null,8,["modelValue","errorMessage"]),n(l,{modelValue:o.email,"onUpdate:modelValue":e[3]||(e[3]=s=>o.email=s),label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u5730\u5740"},{suffix:d(()=>[n(i,{disabled:o.sendCodeButton,variant:"text",onClick:e[2]||(e[2]=s=>a.sendCode())},{default:d(()=>[m(V(o.sendCodeButtonText),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),n(l,{modelValue:o.code,"onUpdate:modelValue":e[4]||(e[4]=s=>o.code=s),onChange:e[5]||(e[5]=s=>a.checker()),label:"\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),n(l,{modelValue:o.password,"onUpdate:modelValue":e[6]||(e[6]=s=>o.password=s),label:"\u5BC6\u7801",type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onChange:e[7]||(e[7]=s=>a.checker())},null,8,["modelValue"]),n(l,{modelValue:o.retryPassword,"onUpdate:modelValue":e[8]||(e[8]=s=>o.retryPassword=s),label:"\u786E\u8BA4\u5BC6\u7801",type:"password",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",onChange:e[9]||(e[9]=s=>a.checker())},null,8,["modelValue"]),n(i,{disabled:o.buttonDisabled,loading:o.buttonLoading,style:{"margin-top":"10px"},theme:"primary",shape:"circle",onClick:e[10]||(e[10]=s=>a.action()),size:"large"},{default:d(()=>[n(h)]),_:1},8,["disabled","loading"])])])}const z=f(B,[["render",S],["__scopeId","data-v-77ff5597"]]);export{z as default};
